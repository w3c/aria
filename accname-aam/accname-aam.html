<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Accessible Name and Description: Computation and API Mappings 1.1</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<script src="../common/script/jquery-1.9.0.min.js"></script>
<script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
<script src="../common/script/resolveReferences.js" class="remove"></script>
	<script src="../common/biblio.js" class="remove"></script>
<link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel="stylesheet" type="text/css"/>
<link href="../common/css/mapping-tables.css" rel="stylesheet" type="text/css"/>
<link href="../common/css/common.css" rel="stylesheet" type="text/css"/>

<script class="remove">
  var respecConfig = {
    includePermalinks: true,
    
    // specification status (e.g., WD, LC, NOTE, etc.). If in doubt use ED.
    specStatus:           "ED",
    //crEnd:                "2012-04-30",
    //perEnd:               "2013-07-23",
    //publishDate:           "2013-08-22",
    diffTool:             "http://www.aptest.com/standards/htmldiff/htmldiff.pl",

    // the specifications short name, as in http://www.w3.org/TR/short-name/
    shortName:            "accname-aam-1.1",
          
    // if you wish the publication date to be other than today, set this
    //publishDate:  "2014-12-11",
    copyrightStart:  "2014",

    // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
    // and its maturity status
    //previousPublishDate:  "2014-03-20",
    //previousMaturity:     "REC",
    prevRecURI:           "http://www.w3.org/TR/2014/REC-wai-aria-implementation-20140320/",
    previousDiffURI:      "http://www.w3.org/TR/2014/REC-wai-aria-implementation-20140320/",

    // if there a publicly available Editors Draft, this is the link
    edDraftURI:           "http://w3c.github.io/aria/accname-aam/accname-aam.html",

    // if this is a LCWD, uncomment and set the end of its review period
    // lcEnd: "2012-02-21",

    // editors, add as many as you like
    // only "name" is required
    editors:  [
        { name: "Joseph Scheuhammer",
          company: "Inclusive Design Research Centre, OCAD University",
          companyURI:"http://idrc.ocad.ca"
        },
        { name: "James Craig",
          url: 'http://www.apple.com',
				  mailto: "jcraig@apple.com",
				  company: "Apple Inc.", 
				  companyURI: "http://www.apple.com"
        },
        { name: "Andi Snow-Weaver (until December 2012)",
          company: "IBM",
          companyURI: "http://www.ibm.com"
        },
        { name: "Aaron Leventhal (until January 2009)",
          company: "IBM",
          companyURI: "http://www.ibm.com" },
    ],
    // authors, add as many as you like. 
    // This is optional, uncomment if you have authors as well as editors.
    // only "name" is required. Same format as editors.

    //authors:  [
    //    { name: "Your Name", url: "http://example.org/",
    //      company: "Your Company", companyURI: "http://example.com/" },
    //],

	/*
    alternateFormats: [
          { uri: 'aria-implementation-diff.html',
            label: "Diff from Previous Recommendation" } ,
          { uri: 'aria-implementation.ps',
            label: "PostScript version" },
          { uri: 'aria-implementation.pdf',
            label: "PDF version" }
    ],
    */
    
    // Working group info
    wg:           "Accessible Rich Internet Applications Working Group",
    wgURI:        "http://www.w3.org/WAI/ARIA/",
    wgPublicList: "public-aria",

    // URI of the patent status for this WG, for Rec-track documents
    // !!!! IMPORTANT !!!!
    // This is important for Rec-track documents, do not copy a patent URI from a random
    // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
    // Team Contact.
    wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/83726/status",
    
    tocIntroductory: true,
    //maxTocLevel: 4,
    
    // Spec URLs
    ariaSpecURLs: {
      "ED": "http://w3c.github.io/aria/aria/aria.html",
      "WD" : "http://www.w3.org/TR/wai-aria-1.1/",
      "FPWD": "http://www.w3.org/TR/wai-aria-1.1/",
      "REC": "http://www.w3.org/TR/wai-aria/"
    },
    coreMappingURLs: {
       "ED": "http://w3c.github.io/aria/core-aam/core-aam.html",
       "WD" : "http://www.w3.org/TR/core-aam-1.1/",
       "FPWD": "http://www.w3.org/TR/core-aam-1.1/",
       "REC": "http://www.w3.org/TR/wai-aria-implementation/"
    },

    localBiblio: biblio,
    
    preProcess: [ linkCrossReferences ]
  }
</script>
<script src="../common/script/jquery.details.min.js"></script>
<script src="../common/script/mapping-tables.js"></script>
</head>
<body>
<section id="abstract">
	<p>This document describes how <a class="termref">user agents</a> determine <a class="termref" data-lt="accessible name">names</a> and <a class="termref" data-lt="accessible description">descriptions</a> of <a class="termref">accessible objects</a> from web content languages and expose them in <a class="termref">accessibility <abbr title="Application Programming Interfaces">APIs</abbr></a>. This allows <a class="termref">assistive technologies</a> to associate and relay the name or description of objects to users. Documenting the algorithm and mappings promotes interoperable exposure of these properties and events as implemented by different accessibility APIs, and helps to ensure that this information appears in a manner consistent with author intent. </p>
	<p>The accessible name and description computation and mappings specification defines support that applies across multiple content technologies. This includes accessible name and description provided by general-purpose <cite><a href="http://www.w3.org/TR/wai-aria-1.1/"><abbr title="Accessible Rich Internet Applications">WAI-ARIA</abbr></a></cite> [[!WAI-ARIA]] <a class="termref">roles</a>, <a class="termref">states</a>, and <a class="termref">properties</a> as well as features specific to individual content languages. The accessible name and description computation extends the mapping guidance provided by <cite><a href="http://www.w3.org/TR/core-aam-1.1/"><abbr title="Core Accessibility API Mappings 1.1">CORE-AAM</abbr></a></cite> [[!CORE-AAM]] and technology-specific accessibility API mappings. </p>
	<p>This document updates and will eventually supersede the accessible name and description guidance in the <a href="http://www.w3.org/TR/wai-aria-implementation/">WAI-ARIA 1.0 User Agent Implementation Guide</a> [[!WAI-ARIA-IMPLEMENTATION]] W3C Recommendation. It is part of the <abbr title="Accessible Rich Internet Applications">WAI-ARIA</abbr> suite described in the <a href="http://www.w3.org/WAI/intro/aria.php"><abbr title="Accessible Rich Internet Application">WAI-ARIA</abbr> Overview</a>.</p>
</section>
<section id="sotd">
</section>
<section id="intro">
	<h2>Introduction</h2>
      <p>This section is <a class="termref">informative</a>.</p>
      <p><a class="termref">User agents</a> acquire information from the <abbr title="Document Object Model">DOM</abbr> and create a parallel structure called the <a class="termref">accessibility tree</a>, made up of <a class="termref">accessible objects</a>.  An accessible object provides information about its <a class="termref">role</a>, <a class="termref">states</a>, and <a class="termref">properties</a>.  An example is an accessible object whose role is <code>menuitem</code>, is currently in an <code>enabled</code> state, with a <code>haspopup</code> property, indicating that it leads to a sub-menu.  </p>
      <p>The two properties of accessible objects described in this document are its <a class="termref">accessible name</a> and <a class="termref">accessible description</a>.  The name is a short label that provides information about the purpose of the object.  An example of an accessible name for a menu item is <code>New</code>, signifying that the menu item provides for the creation of new documents, windows, and so on.  </p>
      <p>The description is a short explanation that further clarifies the nature of the accessible object.  It is not always necessary to provide a description  if the name is sufficient, but it can help a user better understand the use of the object.</p>
      <p><a class="termref">Accessibility <abbr title="Application Programming Interfaces">APIs</abbr></a> currently support flat, unstructured strings for accessible names and descriptions.  The result of the name/description computation is thus a flat string. </p>      
      <p>The terms "accessible name" and "accessible description" are used to emphasize that they are properties of <a class="termref">accessible objects</a> as exposed by <a class="termref">Accessibility <abbr title="Application Programming Interfaces">APIs</abbr></a>.  However, they are frequently referred to hereafter as simply "name" and "description".</p>
</section>
<section id="normative" class="normative">
	<h2>Normative User Agent Implementation Requirements for <abbr title="Accessible Rich Internet Applications">WAI-ARIA</abbr></h2>
	<p>This section is <a class="termref">normative</a>.</p>
	<p>This specification indicates whether a section is <a class="termref">normative</a> or <a class="termref">informative</a> and the classification applies to the entire section. A statement "This section is normative" or "This section is informative" applies to all sub-sections of that section.</p>
	<p>Normative sections provide requirements that <a class="termref">user agents</a> must follow for an implementation to conform to this specification. The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in <cite><a href="http://www.rfc-editor.org/rfc/rfc2119.txt">Keywords for use in RFCs to indicate requirement levels</a></cite> [[!RFC2119]]. RFC-2119 keywords are formatted in uppercase and contained in a <code>strong</code> element with <code>class="rfc2119"</code>. When the keywords shown above are used, but do not share this format, they do not convey formal information in the RFC 2119 sense, and are merely explanatory, i.e., informative. As much as possible, such usages are avoided in this specification.</p>
	<p>Informative sections provide information useful to understanding the specification. Such sections may contain examples of recommended practice, but it is not required to follow such recommendations in order to conform to this specification.</p>
</section>
<section id="glossary">
  <h2>Important Terms</h2>
  <p>This section is <a class="termref">normative</a>.</p>
  <div data-include="../common/terms.html" data-oninclude="restrictReferences"></div>
</section>
<section id="mapping_additional_nd" class="normative">
  <h2>Name and Description</h2>
  <p>This section is <a class="termref">normative</a>.</p>
  <p>The starting point of the name and description computation is a <abbr title="Document Object Model">DOM</abbr> <a class="termref">element</a>.  The output is a flat, unstructured string that can be as simple as a single word, or a string of space-separated tokens.  Examples include <code>Save</code> and <code>Reload from disk</code>.</p>
  <p>An important factor is the <a class="termref">element</a>'s <a class="termref">role</a>, that determines which content contributes to the name string.  Roles have a <code>nameFrom</code> <abbr title="Resource Description Framework">RDF</abbr> property, with two possible values:  </p>
  <dl class="runin">
    <dt>author</dt>
    <dd>name is generated from values provided by the author in explicit markup features such as the <code>aria-label</code> and <code>aria-labelledby</code> <a class="termref">attribute</a>, or a host language labeling mechanism, such as the <code>alt</code> or <code>title</code> <a class="termref">attribute</a> in <abbr title="Hypertext Markup Language">HTML</abbr>, or the <code>desc</code> <a class="termref">element</a> in <abbr title="Scalable Vector Graphics">SVG</abbr>. </dd>
    <dt>contents</dt>
    <dd>name is generated from the <a class="termref" data-lt="text node">Text nodes</a> associated with the <a class="termref">element</a>. Although this may be allowed in addition to "author" in some <a class="termref">roles</a>, "content" is used only if higher priority "author" features are not provided. Priority is defined by the <a href="#mapping_additional_nd_te">text alternative computation</a> algorithm.</dd>
  </dl>
  <p class="ednote">(Joseph) Need links into ARIA spec to (1) a list of nameFrom:author roles, and (2) a list of nameFrom:contents roles.  Reference these at step 2F below. </p>
  <section id="mapping_additional_nd_name">
    <h3>Name Computation</h3>
    <p><a class="termref">User agents</a> MUST compute an <a class="termref">accessible name</a> using the rules outlined below in the section titled <a href="#mapping_additional_nd_te">Text Alternative Computation</a>.</p>
  </section>
  <section id="mapping_additional_nd_description">
    <h3>Description Computation</h3>
    <p>If <a class="property-reference" href="#aria-describedby"><code>aria-describedby</code></a> is present, <a class="termref">user agents</a> MUST compute the accessible description by	concatenating the text alternatives for elements referenced by an <code>aria-describedby</code> attribute on the current element. The text alternatives for the referenced elements are computed using a  							number of methods, outlined below in the section titled <a href="#mapping_additional_nd_te">Text Alternative Computation</a>. </p>
  </section>
  <section id="mapping_additional_nd_te">
    <h3>Text Alternative Computation</h3>
    <p>The text alternative computation is used to generate both the <a class="termref">accessible name</a> and <a class="termref">accessible description</a>. There are different rules provided for several different types of <a class="termref">elements</a>, <a class="termref" data-lt="node">nodes</a>, and combinations of markup. Text alternatives are built up, when appropriate, from all the relevant content contained within an <a class="termref">element</a>. This is accomplished via steps 2B and 2F, which are recursive, using the full set of rules to retrieve text from its own children or nodes it references. </p>
    <p>The purpose of the computation is to create a <a class="termref">perceivable</a> label or description for alternative presentations, in the form of a flat string of space separated textual tokens. </p>
    <section id="terminology">
      <h4>Terminology</h4>
      <dl>
        <dt>Root node</dt>
        <dd>The <abbr title="Document Object Model">DOM</abbr> <a class="termref">node</a> or <a class="termref">element</a> for which the text alternative is sought.</dd>
        <dt>Current node</dt>
        <dd>The <abbr title="Document Object Model">DOM</abbr> <a class="termref">node</a> currently traversed to compute the <code>root node</code>'s text equivalent.  Initially, the <code>current node</code> is the <code>root node</code>, but at later stages is either some descendant of the <code>root node</code>, or another referenced node.</dd>
        <dt>Flat string</dt>
        <dd>A string of characters where all carriage returns, newlines, tabs, and form-feeds are replaced with a single space, and multiple spaces are reduced to a single space.  The string contains only character data; it does not contain any markup.  </dd> 
        <dt>Total Accumulated text</dt>
        <dd>The text equivalent computed up to, but not including the <code>current node</code>.</dd>
        <dt>Accumulated text</dt>
        <dd>Text accumulated at a step or sequence of steps described below.  It is temporary storage for those steps.</dd>
        <dt>Result</dt>
        <dd>The text equivalent computed at one of the steps described below.</dd>
        <dt>Append the result, without a space, to X</dt>
        <dd>
          <ul>
            <li>If X is empty, copy the <code>result</code> to X.</li>
            <li>If X is non-empty, copy the <code>result</code> to the end of X.</li>
          </ul>
        </dd>
        <dt>Append the result, with a space, to X</dt>
        <dd>
          <ul>
            <li>If X is empty, copy the <code>result</code> to X.</li>
            <li>If X is non-empty, add a space to the end of X and then copy the <code>result</code> to X after the space.</li>
          </ul>
        </dd>
        <dt>Prepend result, without a space, to X</dt>
        <dd>
          <ul>
            <li>If X is empty, copy the <code>result</code> to X.</li>
            <li>If X is non-empty, copy the <code>result</code> to the start of X.</li>
          </ul>
        </dd>
        <dt>Prepend the result, with a space, to X</dt>
        <dd>
          <ul>
            <li>If X is empty, copy the <code>result</code> to X.</li>
            <li>If X is non-empty, copy the <code>result</code> to the start of X, and add a space after the copy.</li>
          </ul>
        </dd>
      </dl>
    </section>
      <p>The text alternative for a given element is computed as follows:</p>
      <ol>
        <li id="step1">Initialize:  Set the <code>root node</code> to the given element, the <code>current node</code> to the <code>root node</code>, and the <code>total accumulated text</code> to the empty string ("").</li>
        <li id="step2">Compute the text alternative for the <code>current node</code>:
          <ol>
            <li id="step2A">If the <code>current node</code> is <a class="termref">hidden</a> <strong>and is not</strong> referenced by <code>aria-labelledby</code> or <code>aria-describedby</code>, nor referenced by a native host language text alternative <a class="termref">element</a> or <a class="termref">attribute</a>, return the empty string.
              <div><details>
                <summary>Comment:</summary>
                <p>By default, <a class="termref">assistive technologies</a> do not relay hidden information, but an author can explicitly override that and include hidden text as part of the <a class="termref">accessible name</a> or <a class="termref">accessible description</a> by using <code>aria-labelledby</code> or <code>aria-describedby</code>. </p>
              </details></div>
            </li>
            <li id="step2B">Otherwise:
              <ul>
                <li>if computing a <a class="termref" data-lt="accessible name">name</a>, and the <code>current node</code> has a non-empty <code>aria-labelledby</code> <a class="termref">attribute</a>, and the <code>current node</code> is not already part of an <code>aria-labelledby</code> traversal, process its IDREFs in the order they occur: </li>
                <li>or, if computing a <a class="termref" data-lt="accessible description">description</a>, and the <code>current node</code> has a non-empty <code>aria-describedby</code> <a class="termref">attribute</a>, and the <code>current node</code> is not already part of an <code>aria-describedby</code> traversal, process its IDREFs in the order they occur: 
                  <ol>
                    <li id="step2B.i">Set the <code>accumulated text</code> to the empty string.</li>
                    <li id="step2B.ii">For each IDREF:
                      <ol>
                        <li id="step2B.ii.a">Set the <code>current node</code> to the node referenced by the IDREF.</li>
                        <li id="step2B.ii.b">Compute the text alternative of the <code>current node</code> beginning with step 2. Set the <code>result</code> to that text alternative.</li>
                        <li id="step2B.ii.c">Append the <code>result</code>, with a space, to the <code>accumulated text</code>.</li>
                      </ol>
                    </li>
                    <li id="step2B.iii">Return the <code>accumulated text</code>.</li>
                  </ol>
                </li>
              </ul>
              <div><details>
                <summary>Example:</summary>
                <p>The following example shows the meaning of the clause "&#8230; and the <code>current node</code> is not already part of an <code>aria-labelledby</code> traversal &#8230;" .</p>
                <ul>
                  <li><code>element1</code>'s <a class="termref">accessible name</a> is "hello" because this is a first traversal of its <code>aria-labelledby</code>, leading to <code>element3</code>.</li>
                  <li><code>element2</code> has no <a class="termref">accessible name</a>.  The computation involves a first traversal of its <code>aria-labelledby</code> leading to <code>element1</code>, but <code>element1</code>'s  <code>aria-labelledby</code> is not subsequently followed. </li>
                </ul>
                <pre class="example highlight"><code>&lt;element1 id="el1" aria-labelledby="el3" /&gt;
&lt;element2 id="el2" aria-labelledby="el1" /&gt;
&lt;element3 id="el3"&gt; hello &lt;/element3&gt;</code>
                </pre>
              </details></div>
            </li>
            <li id="step2C">Otherwise, if computing a <a class="termref" data-lt="accessible name">name</a>, and if the <code>current node</code> has a non-empty <code>aria-label</code> <a class="termref">attribute</a>:
              <ul>
                <li>If traversal of the <code>current node</code> is due to recursion <strong>and</strong> the <code>current node</code> is an embedded control as defined in step 2E, ignore <code>aria-label</code> and skip to rule 2E.</li>
                <li>Otherwise, return the value of <code>aria-label</code>.</li>
              </ul>
              <div><details>
                <summary>Example:</summary>
                  <p>The following example shows the interaction of <code>aria-labelledby</code> and <code>aria-label</code> when a <a class="termref">node</a> has an  <code>aria-labelledby</code> that refers to itself.  The <code>&lt;span role="button"&gt;</code> elements have the <a class="termref">accessible names</a> "Delete Documentation.pdf" and "Delete HolidayLetter.pdf", respectively.</p>
                  <pre class="example highlight"><code>&lt;h1&gt;Files&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;a id=&quot;file_row1&quot; href=&quot;./files/Documentation.pdf&quot;&gt;Documentation.pdf&lt;/a&gt;
    <strong>&lt;span role=&quot;button&quot; tabindex=&quot;0&quot; id=&quot;del_row1&quot; aria-label=&quot;Delete&quot; aria-labelledby=&quot;del_row1 file_row1&quot;&gt;&lt;/span&gt;</strong>
  &lt;/li&gt;
  &lt;li&gt;
    &lt;a id=&quot;file_row2&quot; href=&quot;./files/HolidayLetter.pdf&quot;&gt;HolidayLetter.pdf&lt;/a&gt;
    <strong>&lt;span role=&quot;button&quot; tabindex=&quot;0&quot; id=&quot;del_row2&quot; aria-label=&quot;Delete&quot; aria-labelledby=&quot;del_row2 file_row2&quot;&gt;&lt;/span&gt;</strong>
  &lt;/li&gt;
&lt;/ul&gt;</code></pre>
                </details></div>
            </li>
            <li id="step2D">Otherwise, if the <code>current node</code>'s native markup provides an <a class="termref">attribute</a> or <a class="termref">element</a> that defines a text alternative, return that alternative as a <code>flat string</code>, unless the element is marked as presentational (<code>role="presentation"</code> or <code>role="none"</code>).
              <p class="ednote">Above wording taken from second note in <a href="https://www.w3.org/WAI/PF/Group/track/issues/522">ISSUE-522</a>.</p>
              <div><details>
                <summary>Comment:</summary>
                <p>For example, in <abbr title="Hypertext Markup Language">HTML</abbr>, the <code>img</code> element's <code>alt</code> attribute defines a text alternative string, and the <code>label</code> element provides text for the referenced form element.  In <abbr title="SVG2">SVG2</abbr>, the <code>desc</code> and <code>title</code> elements provide a description of their parent element. </p>
              </details></div>
            </li>
            <li id="step2E">Otherwise, if the <code>current node</code> is a control embedded within the label of another <a class="termref">widget</a>, where the user can adjust the embedded control's value, then include the embedded control as part of the text alternative in the following manner:
              <ul>
                <li>If the embedded control has role <a class="role-reference" href="#textbox">textbox</a>, return its value.</li>
                <li>If the embedded control has role menu <a class="role-reference" href="#button">button</a>, return the text alternative of the button.</li>
                <li>If the embedded control has role <a class="role-reference" href="#combobox">combobox</a>, return the text alternative of the chosen <a class="role-reference" href="#option">option</a>.</li>
                <li>If the embedded control has role <a class="role-reference" href="#range">range</a> (e.g., a <a class="role-reference" href="#spinbutton">spinbutton</a> or <a class="role-reference" href="#slider">slider</a>):
                  <ul>
                    <li>If the <code>aria-valuetext</code> property is present, return its value, </li>
                    <li>Otherwise, if the <code>aria-valuenow</code> property is present, return its value,</li>
                    <li>Otherwise, use the value as specified by a host language attribute. </li>
                  </ul>
                </li>
              </ul>
              <div><details>
                <summary>Example:</summary>
                <p>Consider a <a class="role-reference" href="#checkbox">check box</a> label that contains a text input field: "Flash the screen [input] times". If the user has entered "5" for the embedded <a class="role-reference" href="#textbox">textbox</a>, the complete label is "Flash the screen 5 times", e.g.: </p>
                <pre class="example highlight"><code>&lt;div role="checkbox" aria-checked="false"&gt;Flash the screen &lt;span role="textbox" aria-multiline="false"&gt; 5 &lt;/span&gt; times&lt;/div&gt;</code></pre>
              </details></div>
              </li>
            <li id="step2F">Otherwise, if the <code>current node's</code> <a class="termref">role</a> allows "Name From: contents", or if the <code>current node</code> is referenced by <code>aria-labelledby</code>, <code>aria-describedby</code>, or is a native host language text alternative <a class="termref">element</a>:
              <ol>
                <li id="step2F.i">Set the <code>accumulated text</code> to the empty string.</li>
                <li id="step2F.ii">Check for <abbr title="Cascading Style Sheets">CSS</abbr> generated textual content associated with the <code>current node</code> and include it in the <code>accumulated text</code>:
                  <ul>
                    <li>The "bullet" or "number" characters associated with a list item are not present in the <abbr title="Document Object Model">DOM</abbr>, but are provided by the <a class="termref" data-lt="user agent">user agent's</a> style engine.  If the <abbr title="Cascading Style Sheets">CSS</abbr> <a href="http://www.w3.org/TR/CSS2/generate.html#propdef-list-style-type"><code>list-style-type</code></a> is not <code>"none"</code>, <a class="termref">user agents</a> MUST prepend the list item indicator text to the item's text.  If the list item indicator text includes a space, prepend the indicator text without a space; otherwise prepend with a space.</li>
                    <li>Similarly, the <abbr title="Cascading Style Sheets">CSS</abbr> <a href="http://www.w3.org/TR/CSS2/generate.html#before-after-content"><code>:before</code> and <code>:after</code></a> pseudo elements can provide textual content for <a class="termref">elements</a> that have a content model.
                      <ul>
                        <li>For <code>:before</code> pseudo elements, <a class="termref">User agents</a> MUST prepend <abbr title="Cascading Style Sheets">CSS</abbr> textual content, without a space, to the textual content of the <code>current node</code>. </li>
                        <li>For <code>:after</code> pseudo elements, <a class="termref">User agents</a> MUST append <abbr title="Cascading Style Sheets">CSS</abbr>  textual content, without a space, to the textual content of the <code>current node</code>. </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li id="step2F.iii">For each child node of the <code>current node</code>:
                  <ol>
                    <li id="step2F.iii.a">Set the <code>current node</code> to the child node.</li>
                    <li id="step2F.iii.b">Compute the text alternative of the  <code>current node</code> beginning with step 2.  Set the <code>result</code> to that text alternative.</li>
                    <li id="step2F.iii.c">Append the <code>result</code> to the <code>accumulated text</code>. </li>
                  </ol>
                  <p class="ednote">(Joseph) the last step above needs work since there are cases where you "append with a space" and others where you "append without a space".  Example of the latter:  <code>&lt;label&gt; &lt;input type="checkbox"&gt; Make this the &lt;em&gt;top&lt;/em&gt;most element&lt;/label&gt;</code>.  The result is "Make this the topmost element", not "Make this the top most element" &#8211; do not append a space after "top".</p>
                </li>
                <li id="step2F.iv">Return the <code>accumulated text</code>.</li>
              </ol>
              <p><strong>Important</strong>:  Each <a class="termref">node</a> in the subtree is consulted only once. If text has been collected from a descendant, but is referenced by another IDREF in some descendant node, then that second, or subsequent, reference is not followed. This is done to avoid infinite loops.  </p>
              <div><details>
                <summary>Comment:</summary>
                <p>This step can apply to the child nodes themselves, which means the computation is recursive and results in text collected from all the elements in the <code>current node</code>'s subtree, no matter how deep it is. However, any given descendant <a class="termref">node</a>'s text alternative can result from higher precedent markup described in steps B through D above, where "Namefrom: author" attributes provide the text alternative for the entire subtree. </p>
              </details></div>
            </li>
            <li id="step2G">Otherwise, if the <code>current node</code> is a <a class="termref">Text node</a>, return its textual contents.</li>
            <li id="step2H">Otherwise, if the <code>current node</code> has a tooltip <a class="termref">attribute</a>, return its value. 
              <div><details>
                <summary>Comment:</summary>
                <p>Tooltip attributes are used only if nothing else, including subtree content, has provided results. </p>
                <p class="ednote">(Joseph) Define "tooltip attribute"?</p>
              </details></div>
            </li>
          </ol>
          <p>Append the <code>result</code> of each step above, with a space, to the <code>total accumulated text</code>.</p>
        </li>
      </ol>
      <p>After all steps are completed, the <code>total accumulated text</code> is used as the <a class="termref">accessible name</a> or <a class="termref">accessible description</a> of the <a class="termref">element</a> that initiated the computation.</p>
    </section>
  </section>
  <section>
    <h3>Accessible Name and Description Mapping</h3>
    <p>Each step of the algorithm generates a <code>flat text string</code>.  An implementation trims the text and concatenates it with the text alternative computed by previous steps.  The result is a single flat string name or description associated with the <a class="termref">element</a> for which the text alternative computation was executed.  The computed string is used to set the <a class="termref">accessible name</a> or <a class="termref">accessible description</a> <a class="termref">property</a> of the <a class="termref">accessible object</a> corresponding to the <a class="termref">element</a>.  The specifics of  each <a class="termref">accessibility <abbr title="Application Programming Interfaces">API</abbr></a> mapping is given in the following table.</p>
    <table id="nameMappingTable">
    <caption>
      Accessible name and accessible description mapping table
    </caption>
    <thead>
      <tr>
        <th>Accessibility <abbr title="Application Programming Interfaces">API</abbr> Property</th>
        <th>MSAA + IAccessible2 </th>
        <th><abbr title="User Interface Automation">UIA</abbr></th>
        <th><abbr title="Accessibility Toolkit">ATK</abbr>/<abbr title="Assistive Technology-Service Provider Interface">AT-SPI</abbr></th>
        <th><abbr title="Mac OS X Accessibility Protocol">AXAPI</abbr></th>
      </tr>
    </thead>
    <tbody>
    <tr id="accName">
      <th><a class="termref"><code>accessible name</code></a></th>
      <td>Expose in <code>accName</code> property.
      <p><code>aria-labelledby</code>:  If the referenced objects are in the accessibility tree expose pointers to them using <code>IA2_RELATION_LABELLED_BY</code>, and expose reverse relations as described in <a class="core-mapping" href="#mapping_additional_relations">Relations</a>. </p>
      </td>
      <td>Expose in <code>Name</code> property.
        <p><code>aria-labelledby</code>:  If the referenced objects are in the accessibility tree, expose pointers to them using the <code>LabeledBy</code> property.</p>
      </td>
      <td>Expose in the name property of the accessible object.
        <p><code>aria-labelledby</code>: If the referenced objects are in the accessibility tree, expose pointers to them using <code>RELATION_LABELLED_BY</code>, and expose reverse relations as described in <a class="core-mapping" href="#mapping_additional_relations">Relations</a>. </p>
      </td>
      <td>Expose as <code>string AXTitle</code>, <code>AXDescription</code>, or <code>AXTitleUIElement</code>:
        <ul>
        <li>Accessible name values that are exposed visually, as in the case of a button, should be exposed as string <code>AXTitle</code>. </li>
        <li><code>AXDescription</code> is recommended for accessible name values that are not exposed visually, such as <code>@alt</code> and <code>@aria-label</code>. </li>
        </ul>
        <p><code>aria-labelledby</code>: </p>
        <ul>
          <li>If <code>aria-labelledby</code> references a single element, expose the labeling relationship as element <code>AXTitleUIElement</code>. </li>
          <li>If <code>aria-labelledby</code> references multiple elements, or if the labeling element is invisible or otherwise not exposed in the accessibility tree, expose as <code>string AXDescription</code>. </li>
        </ul>
      </td>
    </tr>
    <tr id="accDesc">
      <th><a class="termref"><code>accessible description</code></a></th>
      <td>Expose in <code>accDescription</code> property.
        <p><code>aria-describedby</code>: If the referenced objects are in the accessibility tree, expose pointers to them using <code>IA2_RELATION_DESCRIBED_BY</code>, and expose reverse relations as described in <a class="core-mapping" href="#mapping_additional_relations">Relations</a>.</p>
      </td>
      <td>TBD.
        <p><code>aria-describedby</code>: If the referenced objects are in the accessibility tree, expose pointers to the referenced accessible objects using the <code>DescribedBy</code> property.</p>
        <p>(See <a href="https://www.w3.org/WAI/PF/Group/track/actions/1104"><strong>ACTION-1104</strong></a>)</p>
      </td>
      <td>Expose in the description property of the accessible object.
        <p><code>aria-describedby</code>: If the referenced objects are in the accessibility tree, expose reverse relations as described in <a class="core-mapping" href="#mapping_additional_relations">Relations</a>.</p>
      </td>
      <td>Expose as <code>string AXHelp</code>.</td>
    </tr>
  </tbody>
  </table>
    <p>More information concerning name and description accessibility API mappings, including relationships, such as labelled-by/label-for and described-by/description-for, is documented in the <a class="core-mapping" href="">Core Accessibility <abbr title="Application Programming Interface">API</abbr> Mappings</a> document [[!CORE-AAM]].  See the mapping table entries for <a class="core-mapping" href="#ariaLabel"><code>aria-label</code></a>, <a class="core-mapping" href="#ariaLabelledBy"><code>aria-labelledby</code></a>, and <a class="core-mapping" href="#ariaDescribedBy"><code>aria-describedby</code></a>.  </p>
  </section>
	<section id="events">
	<h2>Name and Description Change Events</h2>
    <p class="ednote">(Joseph) Certain Accessibility APIs emit events for name and/or description property changes.  Document that here (see, for example, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=991969" target="_blank">FF bugzilla 991969</a>).</p>
    <p>Although rare, sometimes an <a class="termref">accessible name</a> or <a class="termref">accessible description</a> may change.  Examples include: </p>
    <ul>
      <li>Buttons such as the "Play" button in a media player whose label can switch between "Pause" and "Play" depending on its state. </li>
      <li>On/Off switches whose label changes between "On" and "Off". </li>
      <li>Labels with embedded controls as described in step 2E above, since the user can change the value of the embedded control. </li>
      <li>Situations where description text is loaded or set only when needed, such as when the mouse hovers over an object, or the object gains focus. </li>
    </ul>
    <p>The following table lists the events or notifications provided by Accessibility <abbr title="Application Programming Interfaces">APIs</abbr> if the name or description changes. <a class="termref">Assistive technologies</a> can make use of these events to provide the current label as needed. </p>
    <table id="nameDescChangeEvents">
    <caption>
      Table of events fired in each API for changes in name or desription property.
    </caption>
    <thead>
      <tr>
        <th>Accessibility <abbr title="Application Programming Interfaces">API</abbr> Property</th>
        <th>MSAA + IAccessible2 </th>
        <th><abbr title="User Interface Automation">UIA</abbr></th>
        <th><abbr title="Accessibility Toolkit">ATK</abbr>/<abbr title="Assistive Technology-Service Provider Interface">AT-SPI</abbr></th>
        <th><abbr title="Mac OS X Accessibility Protocol">AXAPI</abbr></th>
      </tr>
    </thead>
    <tbody>
    <tr id="accNameChange">
      <th><a class="termref"><code>accessible name</code></a></th>
      <td><code>EVENT_OBJECT_NAMECHANGE</code></td>
      <td><code>PropertyChangeEvent</code></td>
      <td><code>object:property-change:accessible-name</code></td>
      <td><code>TitleChangedNotification</code></td>
    </tr>
    <tr id="accDescChange">
      <th><a class="termref"><code>accessible description</code></a></th>
      <td><code>EVENT_OBJECT_DESCRIPTIONCHANGE</code></td>
      <td><code>PropertyChangeEvent</code></td>
      <td><code>object:property-change:accessible-description</code></td>
      <td>TBD.</td>
    </tr>
  </tbody>
  </table>
	</section>
<section>
  <h2>Appendices</h2>
	<section class="appendix" id="changelog">
		<h2>Change Log</h2>
		<section>
			<h2>Substantive changes since the <a href="http://www.w3.org/TR/2014/WD-accname-aam-1.1-20141211/">last public working draft</a></h2>
			<ul>
				<li>05-Nov-2015: Removed all MSAA+UIA Express mappings.</li>
				<!-- EdNote: After each WD publish, move contents of this list into the next one below.  -->
			</ul>
		</section>
		<section>
			<h2>Other substantive changes since the <a href="http://www.w3.org/TR/2014/REC-wai-aria-implementation-20140320/">WAI-ARIA 1.0 User Agent Implementation Guide Recommendation</a></h2>
			<ul>
				<li>10-Jun-2015: Moved special case of unlabeled <code>&lt;img&gt;</code> to HTML-AAM.</li>
				<li>05-Jan-2015: Glossary entry for "value" removed; removed links to that entry.</li>
				<!-- EdNote: After each WD publish, move previous list into this one. -->
			</ul>
		</section>
	</section>  <div data-include='../common/acknowledgements.html' data-include-replace='true'></div>
</section>
</body>
</html>

