<!DOCTYPE html>
<html lang="en-US">
<head><title>Popup element associated with a combobox must have allowed roles.</title></head>
<body>
  <!--
  URL: https://www.w3.org/TR/wai-aria-1.2/#combobox
  RULE: "Authors MUST ensure the popup element associated with a combobox has
  * a role of listbox, tree, grid, or dialog."
  -->

<!-- Should fail -->

<div aria-controls="associated-element-1"
     role="combobox"
     aria-label="foo"
     aria-expanded="true">
</div>
<div
     id="associated-element-1"
     aria-label="bar"
     class="fail">
</div>

<div aria-controls="associated-element-2"
     role="combobox"
     aria-label="foo"
     aria-expanded="true"
     aria-haspopup="listbox"
     >
</div>
<div
     role="alert"
     id="associated-element-2"
     aria-label="bar"
     class="fail">
</div>

<div aria-controls="associated-element-3"
     role="combobox"
     aria-label="foo"
     aria-expanded="true"
     aria-haspopup="menubar"
     >
</div>
<div
     role="menubar"
     id="associated-element-3"
     aria-label="bar"
     class="fail">
  <div role="menuitem" aria-label="baz"></div>
</div>

<!-- Should pass -->

<div aria-controls="associated-element-4"
     role="combobox"
     aria-label="foo"
     aria-expanded="true">
</div>
<div
     id="associated-element-4"
     role="listbox"
     aria-label="bar"
     class="pass">
</div>

<div aria-controls="associated-element-5"
     role="combobox"
     aria-label="foo"
     aria-expanded="true"
     aria-haspopup="tree"
     >
</div>
<div
     role="tree"
     id="associated-element-5"
     aria-label="bar"
     class="pass">
</div>

<div aria-controls="associated-element-6"
     role="combobox"
     aria-label="foo"
     aria-expanded="true"
     aria-haspopup="grid"
     >
</div>
<div
     role="grid"
     id="associated-element-6"
     aria-label="bar"
     class="pass">
</div>

<div aria-controls="associated-element-7"
     role="combobox"
     aria-label="foo"
     aria-expanded="true"
     aria-haspopup="dialog"
     >
</div>
<div
     role="dialog"
     id="associated-element-7"
     aria-label="bar"
     class="pass">
</div>

</body>
</html>
