  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>ARIA checkbox Role Example: Mixed State Checkbox with Grouping Label</title>
    <meta name="generator" content="BBEdit 10.5" />
    <link href="../css/core.css" rel="stylesheet">
    <link href="../css/table.css" rel="stylesheet">
    <link href="css/checkbox-3.css" rel="stylesheet">
    <script src="js/checkbox-3.js" type="text/javascript"></script>
  </head>
  <body>
    <main>
      <h1>ARIA <code>checkbox</code>: Mixed State Checkbox with Grouping Label</h1>
    <p> <a href="../../aria-practices.html#h-checkbox">Authoring Practice Design Patten for Checkbox</a></p>
      <ul>
          <li>This example uses the native HTML5 semantics for grouping (e.g. fieldset/legend) and is the preferred technique for accessibility.</li>
          <li>This example illustrates the use of a mixed state checkbox (e.g. all condiments) with a set of standard HTML checkboxes, <code>input type="checkbox"</code> (e.g, condiments options). </li>
          <li>This set of examples also illustrates three different techniques for providing a grouping label.</li>
          <li>Changing the state of the standard checkboxes will update the state for the ARIA mixed checkbox. </li>
          <li>Changing the state of the ARIA mixed checkbox will also update the state of the standard HTML checkboxes.</li>
          <li><code>role="checkbox"</code> is only applied to the ARIA mixed checkbox.</li>

      </ul>

      <h2> Checkbox Examples</h2>
      <div  class="group" id="example">
      <h3>1. Checkbox example with <code>fieldset</code> and <code>legend</code></h3>
          <ul>
              <li>Grouping label "sandwich condiments" is defined using <code>fieldset/legend </code>elements.</li>
              <li>Labels for standard checkboxes come from <code>label</code> encapsulation technique.</li>
              <li>Label for ARIA mixed checkbox comes from child text content of the element with <code>role=checkbox</code>.</li>
              <li>Note: It is at the discretion of screen readers to determine when grouping labels are spoken. </li>
          </ul>
      <div id="ex1">
       <fieldset>
          <legend>Sandwich Condiments</legend>
              <div
                  role="checkbox"
                  class="group_checkbox"
                  aria-checked="false"
                  tabindex="0"
                  onclick="toggleGroupCheckbox(event)"
                  onkeydown="toggleGroupCheckbox(event)"
                  onfocus="focusCheckbox(event)"
                  onblur="blurCheckbox(event)"
              >
                <img src="./images/checkbox-unchecked-black.png" alt="">
                All condiments
            </div>
            <label><input type="checkbox" id="desc1">Lettuce</label>
            <label><input type="checkbox" id="desc2">Tomato</label>
            <label><input type="checkbox" id="desc3">Mustard</label>
            <label><input type="checkbox" id="desc4">Sprouts</label>
      </fieldset>
      </div>

      <h3>2. Checkbox example with <code>role = group</code></h3>
          <ul>
              <li>Grouping label “sandwich condiments” defined using <code>role=group</code> and <code>aria-label</code>.</li>
              <li>Labels for standard checkboxes come from <code>label</code> encapsulation technique.</li>
              <li>Label for ARIA mixed checkbox comes from child text content of the element with <code>role=checkbox</code>.</li>
              <li>Note: It is at the discretion of screen readers to determine when grouping labels are spoken.</li>
          </ul>
      <div id="ex2">
      <div role="group"
                 aria-label="sandwitch condiment">
                 <div>Sandwich Condiments</div>
              <div
                  role="checkbox"
                  class="group_checkbox"
                  aria-checked="false"
                  tabindex="0"
                  onclick="toggleGroupCheckbox(event)"
                  onkeydown="toggleGroupCheckbox(event)"
                  onfocus="focusCheckbox(event)"
                  onblur="blurCheckbox(event)"
              >
                <img src="./images/checkbox-unchecked-black.png" alt="">
                All condiments
            </div>
            <label><input type="checkbox" id="ex-2-desc1">Lettuce</label>
            <label><input type="checkbox" id="ex-2-desc2">Tomato</label>
            <label><input type="checkbox" id="ex-2-desc3">Mustard</label>
            <label><input type="checkbox" id="ex-2-desc4">Sprouts</label>
      </div>
      </div>

      <h3>3. Checkbox example with <code>aria-labelledby</code></h3>
          <ul>
              <li>No grouping label is defined for this example. "sandwitch condiments" is included as part of the label for each checkbox.</li>
              <li>Labels for standard checkboxes and ARIA mixed checkbox come from <code>aria-labelledby</code> referencing <code>div</code> element, ''sandwitch condiments" and following <code>span</code> element (e.g. "all condiments", "lettuce", "tomato", "mustard", "sprouts").</li>
              <li>It is important that grouping label, "sandwitch condiments" is the second reference so that each different condiment option label (e.g. "lettuce") is read first and the same grouping label (e.g. "sandwitch condiments") is read second (e.g. <code>aria-labelledby="label1 group1"</code> will be read "lettuce, sandwitch condiments").</li>
              <li>Note: The screen readers will always include “sandwich condiments” (e.g. grouping label) when a checkbox receives keyboard focus, which can be distracting when navigating a long list of controls in the same group.</li>
          </ul>
      <div id="ex3">
      <div id="group1">Sandwich Condiments</div>
          <div
              role="checkbox"
              class="group_checkbox"
              aria-checked="false"
              aria-labelledby="label0 group1"
              tabindex="0"
              onclick="toggleGroupCheckbox(event)"
              onkeydown="toggleGroupCheckbox(event)"
              onfocus="focusCheckbox(event)"
              onblur="blurCheckbox(event)"
          >
            <img src="./images/checkbox-unchecked-black.png" alt="">
            <span id="label0"> All condiments</span>
          </div>

          <div class ="checkbox">
            <input type="checkbox" aria-labelledby="label1 group1">
            <span id="label1">Lettuce</span>
          </div>

          <div class ="checkbox">
            <input type="checkbox" aria-labelledby="label2 group1">
            <span id="label2"> Tomato</span>
          </div>

          <div class ="checkbox">
            <input type="checkbox" aria-labelledby="label3 group1">
            <span id="label3">Mustard</span>
          </div>

          <div class ="checkbox">
            <input type="checkbox" aria-labelledby="label4 group1">
            <span id="label4"> Sprouts</span>
          </div>
        </div>
      </div>


      <h2 id="id_a11yfeature">Common Accessibility Features</h2>
             <ul>
                 <li>The examples use the native HTML5 semantics for checkboxes when possible (e.g. the non-mixed state checkboxes) and is the preferred technique for defining checkbox inputs.</li>
                <li><code>div</code> element with role <code>checkbox</code> identifies the <code>div</code> element as a checkbox (e.g. All Condiments checkbox), which supports a mixed state.</li>
                <li><code>div</code> element with role <code>checkbox</code> has <code>onkeydown</code> event to support keyboard activation of the checkbox.</li>
                <li><code>div</code> element with role <code>checkbox</code> has <code>onclick</code> event to support mouse pointer activation of the checkbox.</li>
                <li><code>div</code> element with role <code>checkbox</code>has <code>tabindex="0"</code> to become part of the tab order of the page.</li>
                <li> <code>img</code> element is used to visually indicate the state of checkbox (e.g. checked, mixed, unchecked) to ensure the visual state will be visible when browsers or operating system use “High Contrast” settings by people with visual impairments. (Note: CSS background image techniques or generated content result in visual state disappearing when browsers or operating systems are configured to display high contrast themes.)
               <li><code>toggleGroupCheckbox(event)</code> uses <code>aria-checked</code> attribute to determine which image is displayed to ensure the information communicated to asssitive tecnology is the same as the visual state (e.g. <code>img</code> element).</li>
                <li><code> onfocus</code> and <code> onblur</code> event handlers on both aria checkbox and standard HTML checkboxes support visual focus styling for keyboard only users.</li>
              </ul>

      <h2 id="id_kbd">Keyboard Support</h2>
      <table aria-labelledby="id_kbd">
        <thead>
          <tr>
            <th>Key</th>
            <th>Function</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Tab</td>
            <td>Moves keyboard focus to checkbox.</td>
          </tr>
          <tr>
            <td>Space</td>
            <td>Toggle the checkbox option either true, false or mixed. False is the default. </td>
          </tr>
        </tbody>
      </table>

      <h2 id="id_rps">ARIA Roles, Properties and States</h2>

      <table aria-labelledby="id_rps">
        <thead>
          <tr>
            <th>Role</th>
            <th>Property/State</th>
            <th>Usage</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>checkbox</td>
            <td></td>
            <td>
              Identify div as Checkbox widget
            </td>
          </tr>
          <tr>
            <td>aria-checked</td>
            <td></td>
            <td>
                Indicate state of checkbox:
                <ul>
                <li>Checked  (e.g. aria-checked=true) </li>
                <li>Unchecked  (e.g. aria-checked=false)</li>
                <li>Mixed (e.g. aria-checked=mixed)</li>
                </ul>
            </td>
          </tr>
          <tr>
            <td>aria-labelledby</td>
            <td></td>
            <td>
            Used to include grouping label in the label of each checkbox
            </td>
          </tr>
        </tbody>
      </table>

      <script src="../js/examples.js" type="text/javascript"></script>

      <h2>Source Code</h2>

      <ul>
        <li>CSS: <a href="css/checkbox-3.css" type="tex/css">checkbox-3.css</a></li>
        <li>Javascript: <a href="js/checkbox-3.js" type="text/javascript">checkbox-3.js</a></li>
      </ul>

      <h3>HTML Code</h3>

      <h4>1. Checkbox example with <code>fieldset</code> and <code>legend</code></h4>
      <div id="sc1"></div>

      <h4>2. Checkbox example with <code>role = group</code></h4>
      <div id="sc2"></div>

      <h4>3. Checkbox example with <code>aria-labelledby </code> </h4>
      <div id="sc3"></div>

    <script>
          sourceCode.add('sc1', 'ex1')
          sourceCode.add('sc2', 'ex2')
          sourceCode.add('sc3', 'ex3')
          sourceCode.make()

    </script>
</main>
  </body>
  </html>
